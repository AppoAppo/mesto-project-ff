(()=>{"use strict";var e=document.querySelector("#card-template").content.querySelector(".places__item"),t="popup_is-opened";function n(e){e.classList.add(t),document.addEventListener("keydown",o)}function r(e){e.classList.remove(t),document.removeEventListener("keydown",o)}function o(e){"Escape"===e.key&&r(document.querySelector(".popup_is-opened"))}var d=document.querySelector(".places__list"),i={editProfile:document.querySelector(".popup_type_edit"),image:document.querySelector(".popup_type_image"),addNewCard:document.querySelector(".popup_type_new-card")},c={editProfile:document.querySelector(".profile__edit-button"),addNewCard:document.querySelector(".profile__add-button")},a={editProfile:document.forms["edit-profile"],addNewCard:document.forms["new-place"]},l={name:document.querySelector(".profile__title"),job:document.querySelector(".profile__description")},u={url:i.image.querySelector(".popup__image"),caption:i.image.querySelector(".popup__caption")},p={delete:function(e){return e.remove()},like:function(e){e.querySelector(".card__like-button").classList.toggle("card__like-button_is-active")},imgPopup:function(e){n(i.image),u.url.src=e.link,u.url.alt=e.name,u.caption.textContent=e.name}},s=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append",r=function(t,n){var r=e.cloneNode(!0),o=r.querySelector(".card__image"),d=r.querySelector(".card__title"),i=r.querySelector(".card__delete-button"),c=r.querySelector(".card__like-button");return o.src=t.link,o.alt=t.name,d.textContent=t.name,i.addEventListener("click",(function(){return n.delete(r)})),c.addEventListener("click",(function(){return n.like(r)})),o.addEventListener("click",(function(){return n.imgPopup(t)})),r}(t,p);d[n](r)};[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){s(e)})),document.querySelectorAll(".popup__close").forEach((function(e){e.addEventListener("click",(function(){r(e.closest(".popup"))}))})),document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("mousedown",(function(t){return function(e,t){e.target===t&&r(t)}(t,e)}))})),a.addNewCard.addEventListener("submit",(function(e){e.preventDefault();var t={name:a.addNewCard["place-name"].value,link:a.addNewCard.link.value};s(t,"prepend"),e.target.reset(),r(i.addNewCard)})),a.editProfile.addEventListener("submit",(function(e){e.preventDefault(),l.name.textContent=a.editProfile.name.value,l.job.textContent=a.editProfile.description.value,r(i.editProfile)})),c.addNewCard.addEventListener("click",(function(e){n(i.addNewCard)})),c.editProfile.addEventListener("click",(function(e){a.editProfile.name.value=l.name.textContent,a.editProfile.description.value=l.job.textContent,n(i.editProfile)}))})();